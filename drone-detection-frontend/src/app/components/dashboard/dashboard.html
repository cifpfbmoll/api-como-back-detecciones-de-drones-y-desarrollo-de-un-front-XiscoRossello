<div class="dashboard">
  <h1 class="page-title">ğŸ“Š Dashboard de DetecciÃ³n de Drones</h1>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Cargando datos...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-message">
    <p>âš ï¸ {{ error }}</p>
    <button (click)="loadData()">Reintentar</button>
  </div>

  <!-- Stats Cards -->
  <div *ngIf="stats && !loading" class="stats-grid">
    <div class="stat-card total">
      <div class="stat-icon">ğŸ“¡</div>
      <div class="stat-content">
        <span class="stat-value">{{ stats.total_detections }}</span>
        <span class="stat-label">Total Detecciones</span>
      </div>
    </div>
    
    <div class="stat-card known">
      <div class="stat-icon">âœ…</div>
      <div class="stat-content">
        <span class="stat-value">{{ stats.known_drones_count }}</span>
        <span class="stat-label">Drones Conocidos</span>
      </div>
    </div>
    
    <div class="stat-card unknown">
      <div class="stat-icon">â“</div>
      <div class="stat-content">
        <span class="stat-value">{{ stats.unknown_devices_count }}</span>
        <span class="stat-label">Dispositivos Desconocidos</span>
      </div>
    </div>
    
    <div class="stat-card manufacturer">
      <div class="stat-icon">ğŸ­</div>
      <div class="stat-content">
        <span class="stat-value manufacturer-name">{{ stats.top_manufacturer || 'N/A' }}</span>
        <span class="stat-label">Fabricante Principal</span>
      </div>
    </div>
  </div>

  <!-- Latest Detections -->
  <div *ngIf="!loading" class="latest-section">
    <h2>ğŸ• Ãšltimas Detecciones</h2>
    
    <div *ngIf="latestDetections.length === 0" class="no-data">
      <p>No hay detecciones registradas</p>
    </div>

    <div class="detections-list" *ngIf="latestDetections.length > 0">
      <div class="detection-card" *ngFor="let detection of latestDetections">
        <div class="detection-header">
          <span class="mac-address">{{ detection.mac_address }}</span>
          <span class="signal-badge" [ngClass]="getRssiClass(detection.rssi)">
            {{ detection.rssi }} dBm ({{ getRssiLabel(detection.rssi) }})
          </span>
        </div>
        <div class="detection-body">
          <div class="detection-info">
            <span class="label">Fabricante:</span>
            <span class="value" [ngClass]="{'unknown': !detection.manufacturer_name}">
              {{ detection.manufacturer_name || 'Desconocido' }}
            </span>
          </div>
          <div class="detection-info">
            <span class="label">UbicaciÃ³n:</span>
            <span class="value">{{ detection.sensor_location }}</span>
          </div>
          <div class="detection-info">
            <span class="label">Detectado:</span>
            <span class="value">{{ detection.detected_at }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
